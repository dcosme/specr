<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Investigating specific specifications • specr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Investigating specific specifications">
<meta property="og:description" content="specr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">specr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/specr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/custom-plot.html">Customizing plots</a>
    </li>
    <li>
      <a href="../articles/decompose_var.html">Identifying variance components</a>
    </li>
    <li>
      <a href="../articles/invest-spec.html">Investigating specific specifications</a>
    </li>
    <li>
      <a href="../articles/measurement_models.html">Including latent measurement models</a>
    </li>
    <li>
      <a href="../articles/progress.html">Visualizing progress</a>
    </li>
    <li>
      <a href="../articles/random_effects.html">Including random effects</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/masurp/specr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="invest-spec_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Investigating specific specifications</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/masurp/specr/blob/master/vignettes/invest-spec.rmd"><code>vignettes/invest-spec.rmd</code></a></small>
      <div class="hidden name"><code>invest-spec.rmd</code></div>

    </div>

    
    
<p>Per default, <code><a href="../reference/run_specs.html">run_specs()</a></code> summarizes individual specifications by using <code><a href="https://rdrr.io/pkg/generics/man/tidy.html">broom.mixed::tidy()</a></code> and “broom::glance()”. For most cases, this provides “sufficient” summary of the relationship of interest and model characteristics. Sometimes, however, it might be useful to investigate specific models in more detail or to investigate a specific parameter that is not provided by the two functions (e.g., r-square). This vignette shows how to access individual models and extract further information from them.</p>
<div id="run-specification-curve-analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#run-specification-curve-analysis" class="anchor"></a>1. Run specification curve analysis</h2>
<p>If we want to investigate individual models and particularly all aspects of that model, we need to use <code><a href="../reference/run_specs.html">run_specs()</a></code> with the additional argument <code>keep.results = TRUE</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://masurp.github.io/specr/">specr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://purrr.tidyverse.org">purrr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://easystats.github.io/performance/">performance</a></span><span class="op">)</span>

<span class="co"># Run specification curve analysis</span>
<span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_specs.html">run_specs</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">example_data</span>, 
                     y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span><span class="op">)</span>, 
                     x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x1"</span>, <span class="st">"x2"</span><span class="op">)</span>, 
                     model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"lm"</span><span class="op">)</span>, 
                     controls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"c1"</span>, <span class="st">"c2"</span><span class="op">)</span>, 
                     subsets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>group1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">example_data</span><span class="op">$</span><span class="va">group1</span><span class="op">)</span>,
                                    group2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">example_data</span><span class="op">$</span><span class="va">group2</span><span class="op">)</span><span class="op">)</span>,
                     keep.results <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></pre></div>
</div>
<div id="identify-models-of-interest" class="section level2">
<h2 class="hasAnchor">
<a href="#identify-models-of-interest" class="anchor"></a>2. Identify model(s) of interest</h2>
<p>For this example, we are going to look at two specific models (same independent variables, all controls, all participants, but different dependent variables).</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="op">(</span><span class="va">y_models</span> <span class="op">&lt;-</span> <span class="va">results</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="st">"x1"</span>, 
         <span class="va">controls</span> <span class="op">==</span> <span class="st">"c1 + c2"</span>,
         <span class="va">subsets</span> <span class="op">==</span> <span class="st">"all"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 x 24</span>
<span class="co">#&gt;   x     y     model controls res   estimate std.error statistic  p.value</span>
<span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;lis&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt; 1 x1    y1    lm    c1 + c2  &lt;lm&gt;    6.17       0.412    15.0   4.70e-42</span>
<span class="co">#&gt; 2 x1    y2    lm    c1 + c2  &lt;lm&gt;   -0.0545     0.267    -0.204 8.38e- 1</span>
<span class="co">#&gt; # … with 15 more variables: conf.low &lt;dbl&gt;, conf.high &lt;dbl&gt;,</span>
<span class="co">#&gt; #   fit_r.squared &lt;dbl&gt;, fit_adj.r.squared &lt;dbl&gt;, fit_sigma &lt;dbl&gt;,</span>
<span class="co">#&gt; #   fit_statistic &lt;dbl&gt;, fit_p.value &lt;dbl&gt;, fit_df &lt;dbl&gt;, fit_logLik &lt;dbl&gt;,</span>
<span class="co">#&gt; #   fit_AIC &lt;dbl&gt;, fit_BIC &lt;dbl&gt;, fit_deviance &lt;dbl&gt;, fit_df.residual &lt;int&gt;,</span>
<span class="co">#&gt; #   fit_nobs &lt;int&gt;, subsets &lt;chr&gt;</span></pre></div>
<p>As you can see, the resulting tibble includes an additional column called “res”. This column includes the entire “model object” and we can use it to further investigate each model.</p>
</div>
<div id="investigate-models" class="section level2">
<h2 class="hasAnchor">
<a href="#investigate-models" class="anchor"></a>3. Investigate models</h2>
<p>For example, we can now easily get a full summary of the models and compare individual coefficients and statistics.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="va">y_models</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">summary</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">coef</span><span class="op">)</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt;               Estimate Std. Error   t value     Pr(&gt;|t|)</span>
<span class="co">#&gt; (Intercept) -13.155786  1.2877892 -10.21579 2.305561e-22</span>
<span class="co">#&gt; x1            6.167539  0.4121184  14.96545 4.697951e-42</span>
<span class="co">#&gt; c1            3.305519  0.2120368  15.58937 7.001986e-45</span>
<span class="co">#&gt; c2            5.069924  0.2071211  24.47807 2.353281e-87</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt;               Estimate Std. Error    t value     Pr(&gt;|t|)</span>
<span class="co">#&gt; (Intercept) -3.4181335  0.8345588 -4.0957372 4.913869e-05</span>
<span class="co">#&gt; x1          -0.0545206  0.2670756 -0.2041392 8.383285e-01</span>
<span class="co">#&gt; c1           3.3246890  0.1374116 24.1951149 5.457463e-86</span>
<span class="co">#&gt; c2           2.3954736  0.1342259 17.8465776 2.162445e-55</span></pre></div>
<p>Or we could get r-squared values for both models.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="va">y_models</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">r2</span><span class="op">)</span>       <span class="co"># r2 is include in the package "performance"</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; # R2 for Linear Regression</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;        R2: 0.702</span>
<span class="co">#&gt;   adj. R2: 0.701</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; # R2 for Linear Regression</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;        R2: 0.659</span>
<span class="co">#&gt;   adj. R2: 0.657</span></pre></div>
</div>
<div id="some-more-examples" class="section level2">
<h2 class="hasAnchor">
<a href="#some-more-examples" class="anchor"></a>4. Some more examples</h2>
<p>This way, we can analyze or compare such statistics across several models.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="va">r2_results</span> <span class="op">&lt;-</span> <span class="va">results</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">subsets</span> <span class="op">==</span> <span class="st">"all"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>r2 <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">res</span>, <span class="va">r2</span><span class="op">)</span>, 
         r2 <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map_dbl</a></span><span class="op">(</span><span class="va">r2</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">r2</span><span class="op">)</span>

<span class="va">r2_results</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">x</span><span class="op">:</span><span class="va">controls</span>, <span class="va">r2</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 16 x 5</span>
<span class="co">#&gt;    x     y     model controls           r2</span>
<span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;           &lt;dbl&gt;</span>
<span class="co">#&gt;  1 x1    y2    lm    no covariates 0.00263</span>
<span class="co">#&gt;  2 x2    y2    lm    no covariates 0.0317 </span>
<span class="co">#&gt;  3 x1    y1    lm    no covariates 0.170  </span>
<span class="co">#&gt;  4 x1    y2    lm    c2            0.257  </span>
<span class="co">#&gt;  5 x2    y2    lm    c2            0.277  </span>
<span class="co">#&gt;  6 x2    y1    lm    no covariates 0.296  </span>
<span class="co">#&gt;  7 x1    y1    lm    c1            0.343  </span>
<span class="co">#&gt;  8 x1    y2    lm    c1            0.440  </span>
<span class="co">#&gt;  9 x2    y2    lm    c1            0.461  </span>
<span class="co">#&gt; 10 x2    y1    lm    c1            0.468  </span>
<span class="co">#&gt; 11 x1    y1    lm    c2            0.557  </span>
<span class="co">#&gt; 12 x1    y2    lm    c1 + c2       0.659  </span>
<span class="co">#&gt; 13 x2    y1    lm    c2            0.661  </span>
<span class="co">#&gt; 14 x2    y2    lm    c1 + c2       0.673  </span>
<span class="co">#&gt; 15 x1    y1    lm    c1 + c2       0.702  </span>
<span class="co">#&gt; 16 x2    y1    lm    c1 + c2       0.807</span></pre></div>
<p>And we can plot comparisons.</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="va">r2_results</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">r2</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>rank <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">rank</span>, 
             y <span class="op">=</span> <span class="va">r2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>strip.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
        axis.line <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_line</a></span><span class="op">(</span><span class="st">"black"</span>, size <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span>,
        axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span><span class="op">)</span></pre></div>
<p><img src="invest-spec_files/figure-html/unnamed-chunk-6-1.png" width="100%"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Philipp K. Masur, Michael Scharkow.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
